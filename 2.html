<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>微信浏览器提示示例</title>
<style>
html, body { margin:0; padding:0; height:100%; font-family: Arial, sans-serif; overflow:hidden;}
#wechatMask {
  display:none;
  position:fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.85);
  color:#fff;
  z-index:9999;
  text-align:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  opacity:0;
  transition: opacity 0.3s ease;
}
#wechatMask.show { opacity:1; }
#wechatMask img { width:160px; margin-bottom:20px; }
#wechatMask .arrow {
  width:50px; height:50px;
  background: url('https://i.imgur.com/3G3h9VQ.png') no-repeat center/contain;
  animation: bounce 1s infinite;
  margin-bottom:20px;
}
@keyframes bounce { 0%,100%{transform:translateY(0);}50%{transform:translateY(-15px);} }
#wechatMask p { font-size:18px; line-height:1.6; margin-bottom:20px; }
#wechatMask button {
  margin:10px; padding:12px 25px; font-size:16px;
  border:none; border-radius:5px; cursor:pointer; transition: transform 0.2s;
}
#wechatMask button:hover { transform: scale(1.05); }
#copyBtn { background:#1AAD19; color:#fff; }
#openBtn { background:#ff9900; color:#fff; }
</style>
</head>
<body>

<div id="wechatMask">
  <img src="https://i.imgur.com/5nqT5sm.png" alt="微信提示图">
  <div class="arrow"></div>
  <p>检测到您正在微信中打开，请复制链接或尝试在浏览器中打开本页面。</p>
  <button id="copyBtn">复制链接</button>
  <button id="openBtn">尝试用浏览器打开</button>
</div>

<script>
function isWeChat() {
    return /micromessenger/i.test(navigator.userAgent);
}

function isAndroid() {
    return /android/i.test(navigator.userAgent);
}

function isIOS() {
    return /iphone|ipad|ipod/i.test(navigator.userAgent);
}

function showMask() {
    const mask = document.getElementById('wechatMask');
    mask.style.display = 'flex';
    setTimeout(() => mask.classList.add('show'), 50);
}

function copyLink() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
        alert('链接已复制，请在浏览器中打开');
    }).catch(() => {
        alert('复制失败，请手动复制链接');
    });
}

function tryOpenInBrowser() {
    const url = window.location.href;

    // 安卓尝试 intent 协议
    if (isAndroid()) {
        window.location.href = `intent://${url.replace(/^https?:\/\//,'')}#Intent;scheme=http;package=com.android.chrome;end`;
        setTimeout(() => alert('如果未自动打开，请手动复制链接到浏览器'), 1500);
    } else if (isIOS()) {
        // iOS 无法直接跳转，只能提示
        alert('请点击右上角“在浏览器中打开”或手动粘贴链接到浏览器访问');
    } else {
        alert('请在浏览器中打开本页面');
    }

    // 同时尝试复制链接
    copyLink();
}

// 初始化
if (isWeChat()) {
    showMask();
    document.getElementById('copyBtn').addEventListener('click', copyLink);
    document.getElementById('openBtn').addEventListener('click', tryOpenInBrowser);
}
</script>

</body>
</html>
